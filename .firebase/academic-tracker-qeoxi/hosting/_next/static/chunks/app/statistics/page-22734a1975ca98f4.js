(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8894],{77679:function(e,t,s){Promise.resolve().then(s.bind(s,99795))},99795:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return P}});var a=s(57437),i=s(48185),n=s(2265),l=s(35231),r=s(85475),d=s(20153),c=s(49354);let o={light:"",dark:".dark"},u=n.createContext(null);function m(){let e=n.useContext(u);if(!e)throw Error("useChart must be used within a <ChartContainer />");return e}let h=n.forwardRef((e,t)=>{let{id:s,className:i,children:r,config:d,...o}=e,m=n.useId(),h="chart-".concat(s||m.replace(/:/g,""));return(0,a.jsx)(u.Provider,{value:{config:d},children:(0,a.jsxs)("div",{"data-chart":h,ref:t,className:(0,c.cn)("flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none",i),...o,children:[(0,a.jsx)(x,{id:h,config:d}),(0,a.jsx)(l.h,{children:r})]})})});h.displayName="Chart";let x=e=>{let{id:t,config:s}=e,i=Object.entries(s).filter(e=>{let[,t]=e;return t.theme||t.color});return i.length?(0,a.jsx)("style",{dangerouslySetInnerHTML:{__html:Object.entries(o).map(e=>{let[s,a]=e;return"\n".concat(a," [data-chart=").concat(t,"] {\n").concat(i.map(e=>{var t;let[a,i]=e,n=(null===(t=i.theme)||void 0===t?void 0:t[s])||i.color;return n?"  --color-".concat(a,": ").concat(n,";"):null}).join("\n"),"\n}\n")}).join("\n")}}):null},f=r.u,g=n.forwardRef((e,t)=>{let{active:s,payload:i,className:l,indicator:r="dot",hideLabel:d=!1,hideIndicator:o=!1,label:u,labelFormatter:h,labelClassName:x,formatter:f,color:g,nameKey:p,labelKey:j}=e,{config:b}=m(),y=n.useMemo(()=>{var e;if(d||!(null==i?void 0:i.length))return null;let[t]=i,s="".concat(j||t.dataKey||t.name||"value"),n=v(b,t,s),l=j||"string"!=typeof u?null==n?void 0:n.label:(null===(e=b[u])||void 0===e?void 0:e.label)||u;return h?(0,a.jsx)("div",{className:(0,c.cn)("font-medium",x),children:h(l,i)}):l?(0,a.jsx)("div",{className:(0,c.cn)("font-medium",x),children:l}):null},[u,h,i,d,x,b,j]);if(!s||!(null==i?void 0:i.length))return null;let N=1===i.length&&"dot"!==r;return(0,a.jsxs)("div",{ref:t,className:(0,c.cn)("grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl",l),children:[N?null:y,(0,a.jsx)("div",{className:"grid gap-1.5",children:i.map((e,t)=>{let s="".concat(p||e.name||e.dataKey||"value"),i=v(b,e,s),n=g||e.payload.fill||e.color;return(0,a.jsx)("div",{className:(0,c.cn)("flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground","dot"===r&&"items-center"),children:f&&(null==e?void 0:e.value)!==void 0&&e.name?f(e.value,e.name,e,t,e.payload):(0,a.jsxs)(a.Fragment,{children:[(null==i?void 0:i.icon)?(0,a.jsx)(i.icon,{}):!o&&(0,a.jsx)("div",{className:(0,c.cn)("shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]",{"h-2.5 w-2.5":"dot"===r,"w-1":"line"===r,"w-0 border-[1.5px] border-dashed bg-transparent":"dashed"===r,"my-0.5":N&&"dashed"===r}),style:{"--color-bg":n,"--color-border":n}}),(0,a.jsxs)("div",{className:(0,c.cn)("flex flex-1 justify-between leading-none",N?"items-end":"items-center"),children:[(0,a.jsxs)("div",{className:"grid gap-1.5",children:[N?y:null,(0,a.jsx)("span",{className:"text-muted-foreground",children:(null==i?void 0:i.label)||e.name})]}),e.value&&(0,a.jsx)("span",{className:"font-mono font-medium tabular-nums text-foreground",children:e.value.toLocaleString()})]})]})},e.dataKey||e.name)})})]})});g.displayName="ChartTooltip";let p=d.D,j=n.forwardRef((e,t)=>{let{className:s,hideIcon:i=!1,payload:n,verticalAlign:l="bottom",nameKey:r}=e,{config:d}=m();return(null==n?void 0:n.length)?(0,a.jsx)("div",{ref:t,className:(0,c.cn)("flex items-center justify-center gap-4","top"===l?"pb-3":"pt-3",s),children:n.map(e=>{let t="".concat(r||e.dataKey||"value"),s=v(d,e,t);return(0,a.jsxs)("div",{className:(0,c.cn)("flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground"),children:[(null==s?void 0:s.icon)&&!i?(0,a.jsx)(s.icon,{}):(0,a.jsx)("div",{className:"h-2 w-2 shrink-0 rounded-[2px]",style:{backgroundColor:e.color}}),null==s?void 0:s.label]},e.value)})}):null});function v(e,t,s){if("object"!=typeof t||null===t)return;let a="payload"in t&&"object"==typeof t.payload&&null!==t.payload?t.payload:void 0,i=s;return s in t&&"string"==typeof t[s]?i=t[s]:a&&s in a&&"string"==typeof a[s]&&(i=a[s]),i in e?e[i]:e[s]}j.displayName="ChartLegend";var b=s(23909),y=s(85369),N=s(68295),w=s(25974),k=s(54142),R=s(2842),C=s(9542),O=s(45745),K=s(78116),L=s(44711),A=s(85811),_=s(38087),E=s(87138),S=s(86864),D=s(67568),M=s(15026);let G={low:"hsl(var(--chart-2))",medium:"hsl(var(--chart-4))",high:"hsl(var(--destructive))",approved:"hsl(var(--chart-2))",failed:"hsl(var(--destructive))",present:"hsl(var(--chart-2))",absent:"hsl(var(--destructive))"};function P(){let{isLoading:e,groups:t,activeGroup:s,calculateFinalGrade:o,calculateDetailedFinalGrade:u,getStudentRiskLevel:m,partialData:x,activePartialId:v,setActivePartialId:P}=(0,D.e)(),{attendance:Z,participations:I}=x,F=(0,n.useMemo)(()=>{if(!s)return[];let e=Object.keys(Z).length;return s.students.map(t=>{let a=(0,M.l)(t,x,s.criteria||[],e);return{studentName:t.name,currentAttendance:a.currentAttendance,projectedGrade:a.currentGrade,riskLevel:a.riskLevel,failingRisk:a.failingRisk,dropoutRisk:a.dropoutRisk,predictionMessage:a.predictionMessage}})},[s,x,Z]),T=(0,n.useMemo)(()=>{if(!s)return null;let e=0,t=0,a=0,i=0,n=[],l={low:0,medium:0,high:0},r=[{name:"0-20%",students:0},{name:"21-40%",students:0},{name:"41-60%",students:0},{name:"61-80%",students:0},{name:"81-100%",students:0}],d=[{name:"0-59",students:0},{name:"60-69",students:0},{name:"70-79",students:0},{name:"80-89",students:0},{name:"90-100",students:0}];for(let a of s.students){let{finalGrade:i}=u(a.id,x,s.criteria||[]);n.push({student:a,grade:i}),i>=60?e++:t++,i<60?d[0].students++:i<70?d[1].students++:i<80?d[2].students++:i<90?d[3].students++:d[4].students++;let c=(0,M.l)(a,x,s.criteria||[],Object.keys(Z).length);l[c.riskLevel]++;let o=Object.keys(I).length;if(o>0){let e=Object.values(I).filter(e=>e[a.id]).length/o*100;e<=20?r[0].students++:e<=40?r[1].students++:e<=60?r[2].students++:e<=80?r[3].students++:r[4].students++}else s.students.length>0&&(r[4].students=s.students.length)}for(let e of Object.values(Z))for(let t of s.students.map(e=>e.id))Object.prototype.hasOwnProperty.call(e,t)&&(e[t]?a++:i++);return n.sort((e,t)=>t.grade-e.grade),{approvalRate:{approved:e,failed:t},attendanceTotals:{present:a,absent:i},riskDistribution:l,topStudents:n.slice(0,5).map(e=>({name:e.student.name,grade:parseFloat(e.grade.toFixed(1))})),participationDistribution:r,gradeDistribution:d}},[s,u,m,Z,I,x]),Y=(0,n.useMemo)(()=>T?[{name:"Aprobados",value:T.approvalRate.approved,fill:G.approved},{name:"Reprobados",value:T.approvalRate.failed,fill:G.failed}].filter(e=>e.value>0):[],[T]),V=(0,n.useMemo)(()=>T?[{name:"Asistencias",value:T.attendanceTotals.present,fill:G.present},{name:"Inasistencias",value:T.attendanceTotals.absent,fill:G.absent}].filter(e=>e.value>0):[],[T]),B=(0,n.useMemo)(()=>T?[{name:"Riesgo Bajo",value:T.riskDistribution.low,fill:G.low},{name:"Riesgo Medio",value:T.riskDistribution.medium,fill:G.medium},{name:"Riesgo Alto",value:T.riskDistribution.high,fill:G.high}].filter(e=>e.value>0):[],[T]),q=(0,n.useMemo)(()=>F.map(e=>({name:e.studentName,attendance:parseFloat(e.currentAttendance.toFixed(1)),grade:parseFloat(e.projectedGrade.toFixed(1)),risk:e.riskLevel,fill:"high"===e.riskLevel?"hsl(var(--destructive))":"medium"===e.riskLevel?"hsl(var(--chart-4))":"hsl(var(--chart-2))"})),[F]),U=(0,n.useMemo)(()=>[{name:"Riesgo Reprobaci\xf3n",count:F.filter(e=>e.failingRisk>50).length,fill:"hsl(var(--destructive))"},{name:"Riesgo Abandono",count:F.filter(e=>e.dropoutRisk>50).length,fill:"#f97316"}],[F]);return e?(0,a.jsxs)("div",{className:"flex justify-center items-center h-full",children:[(0,a.jsx)(_.Z,{className:"h-8 w-8 animate-spin"}),(0,a.jsx)("span",{className:"ml-2",children:"Calculando estad\xedsticas..."})]}):(0,a.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,a.jsx)("div",{className:"flex items-center justify-between",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold",children:"Estad\xedsticas"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Analiza el rendimiento de tus grupos y estudiantes."})]})}),(0,a.jsx)(S.mQ,{defaultValue:v,onValueChange:e=>P(e),className:"w-full",children:(0,a.jsxs)(S.dr,{className:"grid w-full grid-cols-3",children:[(0,a.jsx)(S.SP,{value:"p1",children:"Primer Parcial"}),(0,a.jsx)(S.SP,{value:"p2",children:"Segundo Parcial"}),(0,a.jsx)(S.SP,{value:"p3",children:"Tercer Parcial"})]})}),(0,a.jsxs)(S.mQ,{defaultValue:"activeGroup",children:[(0,a.jsx)(S.dr,{className:"grid w-full grid-cols-1",children:(0,a.jsxs)(S.SP,{value:"activeGroup",disabled:!T,children:["Grupo Activo: ",(null==s?void 0:s.subject)||""]})}),(0,a.jsx)(S.nU,{value:"activeGroup",className:"mt-6",children:T?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:[(0,a.jsxs)(i.Zb,{children:[(0,a.jsx)(i.Ol,{children:(0,a.jsxs)(i.ll,{children:["Riesgo del Grupo (",(0,c.G)(v),")"]})}),(0,a.jsx)(i.aY,{children:(0,a.jsx)(h,{config:{},className:"min-h-[250px] w-full",children:(0,a.jsxs)(b.u,{children:[(0,a.jsx)(f,{content:(0,a.jsx)(g,{nameKey:"name",hideLabel:!0})}),(0,a.jsx)(y.b,{data:B,dataKey:"value",nameKey:"name",innerRadius:50,outerRadius:70,paddingAngle:5,children:B.map(e=>(0,a.jsx)(N.b,{fill:e.fill},e.name))}),(0,a.jsx)(p,{content:(0,a.jsx)(j,{})})]})})})]}),(0,a.jsxs)(i.Zb,{children:[(0,a.jsx)(i.Ol,{children:(0,a.jsxs)(i.ll,{children:["\xcdndice de Aprobaci\xf3n (",(0,c.G)(v),")"]})}),(0,a.jsx)(i.aY,{children:(0,a.jsx)(h,{config:{},className:"min-h-[250px] w-full",children:(0,a.jsxs)(b.u,{children:[(0,a.jsx)(f,{content:(0,a.jsx)(g,{nameKey:"name",hideLabel:!0})}),(0,a.jsx)(y.b,{data:Y,dataKey:"value",nameKey:"name",innerRadius:50,outerRadius:70,paddingAngle:5,children:Y.map(e=>(0,a.jsx)(N.b,{fill:e.fill},e.name))}),(0,a.jsx)(p,{content:(0,a.jsx)(j,{})})]})})})]}),(0,a.jsxs)(i.Zb,{children:[(0,a.jsx)(i.Ol,{children:(0,a.jsxs)(i.ll,{children:["\xcdndice de Asistencia (",(0,c.G)(v),")"]})}),(0,a.jsx)(i.aY,{children:(0,a.jsx)(h,{config:{},className:"min-h-[250px] w-full",children:(0,a.jsxs)(b.u,{children:[(0,a.jsx)(f,{content:(0,a.jsx)(g,{nameKey:"name",hideLabel:!0})}),(0,a.jsx)(y.b,{data:V,dataKey:"value",nameKey:"name",innerRadius:50,outerRadius:70,paddingAngle:5,children:V.map(e=>(0,a.jsx)(N.b,{fill:e.fill},e.name))}),(0,a.jsx)(p,{content:(0,a.jsx)(j,{})})]})})})]})]}),(0,a.jsxs)("div",{className:"grid gap-6 md:grid-cols-2",children:[(0,a.jsxs)(i.Zb,{children:[(0,a.jsxs)(i.Ol,{children:[(0,a.jsxs)(i.ll,{children:["Mejores Calificaciones (",(0,c.G)(v),")"]}),(0,a.jsx)(i.SZ,{children:"Calificaci\xf3n final de los 5 estudiantes con mejor desempe\xf1o."})]}),(0,a.jsx)(i.aY,{children:(0,a.jsx)(h,{config:{},className:"min-h-[300px] w-full",children:(0,a.jsxs)(w.v,{data:T.topStudents,accessibilityLayer:!0,children:[(0,a.jsx)(k.q,{vertical:!1}),(0,a.jsx)(R.K,{dataKey:"name",tickLine:!1,tickMargin:10,axisLine:!1}),(0,a.jsx)(C.B,{dataKey:"grade",domain:[0,100]}),(0,a.jsx)(f,{content:(0,a.jsx)(g,{})}),(0,a.jsx)(O.$,{dataKey:"grade",name:"Calificaci\xf3n",fill:"hsl(var(--chart-2))",radius:4})]})})})]}),(0,a.jsxs)(i.Zb,{children:[(0,a.jsxs)(i.Ol,{children:[(0,a.jsxs)(i.ll,{children:["Distribuci\xf3n de Participaci\xf3n en Clase (",(0,c.G)(v),")"]}),(0,a.jsx)(i.SZ,{children:"N\xfamero de estudiantes por rango de porcentaje de participaci\xf3n."})]}),(0,a.jsx)(i.aY,{children:(0,a.jsx)(h,{config:{},className:"min-h-[300px] w-full",children:(0,a.jsxs)(w.v,{data:T.participationDistribution,accessibilityLayer:!0,children:[(0,a.jsx)(k.q,{vertical:!1}),(0,a.jsx)(R.K,{dataKey:"name",tickLine:!1,tickMargin:10,axisLine:!1}),(0,a.jsx)(C.B,{dataKey:"students",allowDecimals:!1}),(0,a.jsx)(f,{content:(0,a.jsx)(g,{})}),(0,a.jsx)(O.$,{dataKey:"students",name:"Estudiantes",fill:"hsl(var(--primary))",radius:4})]})})})]}),(0,a.jsxs)(i.Zb,{className:"md:col-span-2",children:[(0,a.jsxs)(i.Ol,{children:[(0,a.jsxs)(i.ll,{children:["Distribuci\xf3n de Calificaciones (",(0,c.G)(v),")"]}),(0,a.jsx)(i.SZ,{children:"N\xfamero de estudiantes por rango de calificaci\xf3n."})]}),(0,a.jsx)(i.aY,{children:(0,a.jsx)(h,{config:{},className:"min-h-[300px] w-full",children:(0,a.jsxs)(w.v,{data:T.gradeDistribution,accessibilityLayer:!0,children:[(0,a.jsx)(k.q,{vertical:!1}),(0,a.jsx)(R.K,{dataKey:"name",tickLine:!1,tickMargin:10,axisLine:!1}),(0,a.jsx)(C.B,{dataKey:"students",allowDecimals:!1}),(0,a.jsx)(f,{content:(0,a.jsx)(g,{})}),(0,a.jsx)(O.$,{dataKey:"students",name:"Estudiantes",fill:"hsl(var(--chart-1))",radius:4})]})})})]})]}),(0,a.jsxs)("div",{className:"grid gap-6 md:grid-cols-2 mt-6",children:[(0,a.jsxs)(i.Zb,{children:[(0,a.jsxs)(i.Ol,{children:[(0,a.jsx)(i.ll,{children:"An\xe1lisis de Riesgo: Asistencia vs Calificaci\xf3n"}),(0,a.jsx)(i.SZ,{children:"Correlaci\xf3n entre asistencia y desempe\xf1o acad\xe9mico proyectado."})]}),(0,a.jsx)(i.aY,{children:(0,a.jsx)("div",{className:"h-[300px] w-full",children:(0,a.jsx)(l.h,{width:"100%",height:"100%",children:(0,a.jsxs)(K.G,{margin:{top:20,right:20,bottom:20,left:20},children:[(0,a.jsx)(k.q,{}),(0,a.jsx)(R.K,{type:"number",dataKey:"attendance",name:"Asistencia",unit:"%",domain:[0,100]}),(0,a.jsx)(C.B,{type:"number",dataKey:"grade",name:"Calificaci\xf3n",unit:"%",domain:[0,100]}),(0,a.jsx)(L.d,{type:"category",dataKey:"name",name:"Estudiante"}),(0,a.jsx)(r.u,{cursor:{strokeDasharray:"3 3"}}),(0,a.jsx)(d.D,{}),(0,a.jsx)(A.b,{name:"Estudiantes",data:q,fill:"#8884d8",children:q.map((e,t)=>(0,a.jsx)(N.b,{fill:e.fill},"cell-".concat(t)))})]})})})})]}),(0,a.jsxs)(i.Zb,{children:[(0,a.jsxs)(i.Ol,{children:[(0,a.jsx)(i.ll,{children:"Predicci\xf3n de Riesgo"}),(0,a.jsx)(i.SZ,{children:"Estudiantes proyectados en riesgo de reprobaci\xf3n vs abandono."})]}),(0,a.jsx)(i.aY,{children:(0,a.jsx)(h,{config:{},className:"min-h-[300px] w-full",children:(0,a.jsxs)(w.v,{data:U,accessibilityLayer:!0,children:[(0,a.jsx)(k.q,{vertical:!1}),(0,a.jsx)(R.K,{dataKey:"name",tickLine:!1,tickMargin:10,axisLine:!1}),(0,a.jsx)(C.B,{dataKey:"count",allowDecimals:!1}),(0,a.jsx)(f,{content:(0,a.jsx)(g,{})}),(0,a.jsx)(O.$,{dataKey:"count",name:"Estudiantes",radius:4,children:U.map((e,t)=>(0,a.jsx)(N.b,{fill:e.fill},"cell-".concat(t)))})]})})})]})]}),(0,a.jsxs)(i.Zb,{className:"mt-6",children:[(0,a.jsxs)(i.Ol,{children:[(0,a.jsx)(i.ll,{children:"Detalle de Estudiantes en Riesgo"}),(0,a.jsx)(i.SZ,{children:"Estudiantes con riesgo medio o alto detectado."})]}),(0,a.jsx)(i.aY,{children:(0,a.jsx)("div",{className:"relative w-full overflow-auto",children:(0,a.jsxs)("table",{className:"w-full caption-bottom text-sm",children:[(0,a.jsx)("thead",{className:"[&_tr]:border-b",children:(0,a.jsxs)("tr",{className:"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",children:[(0,a.jsx)("th",{className:"h-12 px-4 text-left align-middle font-medium text-muted-foreground",children:"Estudiante"}),(0,a.jsx)("th",{className:"h-12 px-4 text-left align-middle font-medium text-muted-foreground",children:"Riesgo"}),(0,a.jsx)("th",{className:"h-12 px-4 text-left align-middle font-medium text-muted-foreground",children:"Prob. Reprobaci\xf3n"}),(0,a.jsx)("th",{className:"h-12 px-4 text-left align-middle font-medium text-muted-foreground",children:"Prob. Abandono"}),(0,a.jsx)("th",{className:"h-12 px-4 text-left align-middle font-medium text-muted-foreground",children:"Diagn\xf3stico"})]})}),(0,a.jsx)("tbody",{className:"[&_tr:last-child]:border-0",children:0===F.filter(e=>"low"!==e.riskLevel).length?(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:5,className:"p-4 text-center text-muted-foreground",children:"No se detectaron estudiantes en riesgo."})}):F.filter(e=>"low"!==e.riskLevel).sort((e,t)=>t.failingRisk-e.failingRisk).map((e,t)=>(0,a.jsxs)("tr",{className:"border-b transition-colors hover:bg-muted/50",children:[(0,a.jsx)("td",{className:"p-4 align-middle font-medium",children:e.studentName}),(0,a.jsx)("td",{className:"p-4 align-middle",children:(0,a.jsx)("span",{className:"inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 ".concat("high"===e.riskLevel?"bg-destructive text-destructive-foreground":"bg-yellow-500 text-white"),children:"high"===e.riskLevel?"Alto":"Medio"})}),(0,a.jsxs)("td",{className:"p-4 align-middle",children:[e.failingRisk.toFixed(1),"%"]}),(0,a.jsxs)("td",{className:"p-4 align-middle",children:[e.dropoutRisk.toFixed(1),"%"]}),(0,a.jsx)("td",{className:"p-4 align-middle text-muted-foreground",children:e.predictionMessage})]},t))})]})})})]})]}):(0,a.jsx)(i.Zb,{children:(0,a.jsxs)(i.aY,{className:"flex flex-col items-center justify-center text-center p-12 gap-4",children:[(0,a.jsx)(i.ll,{children:"No hay un grupo activo"}),(0,a.jsxs)(i.SZ,{children:["Para ver las estad\xedsticas detalladas, por favor ",(0,a.jsx)(E.default,{href:"/groups",className:"text-primary underline",children:"selecciona un grupo"})," primero."]})]})})})]})]})}},48185:function(e,t,s){"use strict";s.d(t,{Ol:function(){return r},SZ:function(){return c},Zb:function(){return l},aY:function(){return o},eW:function(){return u},ll:function(){return d}});var a=s(57437),i=s(2265),n=s(49354);let l=i.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...i})});l.displayName="Card";let r=i.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",s),...i})});r.displayName="CardHeader";let d=i.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",s),...i})});d.displayName="CardTitle";let c=i.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",s),...i})});c.displayName="CardDescription";let o=i.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",s),...i})});o.displayName="CardContent";let u=i.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",s),...i})});u.displayName="CardFooter"},86864:function(e,t,s){"use strict";s.d(t,{SP:function(){return c},dr:function(){return d},mQ:function(){return r},nU:function(){return o}});var a=s(57437),i=s(2265),n=s(62447),l=s(49354);let r=n.fC,d=i.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,a.jsx)(n.aV,{ref:t,className:(0,l.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",s),...i})});d.displayName=n.aV.displayName;let c=i.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,a.jsx)(n.xz,{ref:t,className:(0,l.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",s),...i})});c.displayName=n.xz.displayName;let o=i.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,a.jsx)(n.VY,{ref:t,className:(0,l.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s),...i})});o.displayName=n.VY.displayName},15026:function(e,t,s){"use strict";s.d(t,{l:function(){return l}});let a=["aislado","aislamiento","irritable","irritabilidad","conflictivo","agresivo","distra\xeddo","instrucciones","duerme","sue\xf1o","desmotivado","triste","ansiedad","llanto"],i=e=>1/(1+Math.exp(-e)),n=(e,t,s,i,n)=>{let l=[];return(t>60||i<85)&&l.push("RIESGO_ASISTENCIA"),e>60&&l.push("RIESGO_ACADEMICO"),s<.6&&l.push("RIESGO_EJECUTIVO"),n.some(e=>a.some(t=>e.toLowerCase().includes(t)))&&l.push("RIESGO_CONDUCTUAL"),l},l=function(e,t,s,a){let l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],r=arguments.length>5?arguments[5]:void 0,d=new Date,c=Object.keys(t.attendance||{}).sort(),o=c.filter(s=>t.attendance[s][e.id]).length,u=c.length,m=u>0?o/u*100:100,h=0;if(c.length>=3){let s=c.length,a=c.slice(-10),i=Array.from({length:a.length},(e,t)=>t),n=a.map(s=>t.attendance[s][e.id]?1:0),l=i.reduce((e,t)=>e+t,0),r=n.reduce((e,t)=>e+t,0),d=i.reduce((e,t,s)=>e+t*n[s],0),o=s*i.reduce((e,t)=>e+t*t,0)-l*l;0!==o&&(h=(s*d-l*r)/o)}let x=m;h<0&&(x+=20*h),x=Math.max(0,Math.min(100,x));let f=0,g=0,p=0,j=0;s.forEach(s=>{if("Actividades"===s.name||"Portafolio"===s.name){let a=(t.activities||[]).filter(s=>{var a,i,n,l;if(!s.dueDate)return null===(i=t.activityRecords)||void 0===i?void 0:null===(a=i[e.id])||void 0===a?void 0:a[s.id];let r=new Date(s.dueDate)<=d,c=null===(l=t.activityRecords)||void 0===l?void 0:null===(n=l[e.id])||void 0===n?void 0:n[s.id];return r||c}),i=a.length;if(p+=i,i>0){let n=a.filter(s=>{var a,i;return null===(i=t.activityRecords)||void 0===i?void 0:null===(a=i[e.id])||void 0===a?void 0:a[s.id]}).length;j+=n,f+=n/i*s.weight,g+=s.weight}}else if("Participaci\xf3n"===s.name){let a=Object.keys(t.participations||{}).length;if(a>0){let i=Object.values(t.participations).filter(t=>t[e.id]).length;f+=i/a*s.weight,g+=s.weight}}else{var a,i;let n=null===(i=t.grades)||void 0===i?void 0:null===(a=i[e.id])||void 0===a?void 0:a[s.id];if(n&&null!==n.delivered&&void 0!==n.delivered){let e=n.delivered/s.expectedValue;f+=e*s.weight,g+=s.weight}}});let v=g>0?f/g*100:100,b=!1;if(void 0!==r)v=r;else{var y;let s=null===(y=t.recoveryGrades)||void 0===y?void 0:y[e.id];s&&s.applied&&null!==s.grade&&(v=s.grade,b=!0)}let N=p-j,w=p>0?j/p:1,k=Math.min(1,g/20),R=4+-.08*v+-3.5*w,C=0;C=g>0?100*i(R*k):0,v<60&&g>20&&(C=Math.max(C,85));let O=Object.keys(t.participations||{}).length,K=Object.values(t.participations||{}).filter(t=>t[e.id]).length,L=(O>0?K/O:1)<.3,A=100*i(-2+-.05*(m-70)+-10*h);0===c.length&&(A=0),L&&O>0&&(A+=15),A>100&&(A=99);let _="low";A>60||C>70?_="high":(A>30||C>40)&&(_="medium");let E=[];m<85&&E.push("Inasistencias cr\xedticas (".concat((100-m).toFixed(0),"%)")),w<.6&&E.push("Baja entrega de actividades (".concat((100*w).toFixed(0),"%)")),h<-.05&&E.push("Tendencia de asistencia negativa"),v<60&&g>10&&E.push("Promedio actual reprobatorio (".concat(v.toFixed(1),")")),L&&E.push("Desconexi\xf3n en clase (Baja participaci\xf3n)");let S="Rendimiento dentro de par\xe1metros esperados.";"high"===_?S=A>C?"ALERTA DE DESERCI\xd3N (".concat(A.toFixed(0),"%): El patr\xf3n de inasistencias sugiere riesgo inminente de abandono."):"RIESGO ACAD\xc9MICO CR\xcdTICO (".concat(C.toFixed(0),"%): Proyecci\xf3n de reprobaci\xf3n alta si no mejora entrega de actividades."):"medium"===_&&(S="Se detectan se\xf1ales tempranas de riesgo. Se recomienda intervenci\xf3n preventiva.");let D=n(C,A,w,m,l);return{studentId:e.id,studentName:e.name,currentGrade:v,projectedGrade:v,currentAttendance:m,projectedAttendance:x,missedActivitiesCount:N,lowParticipation:L,failingRisk:C,dropoutRisk:A,riskLevel:_,riskFactors:E,predictionMessage:S,pigecFlags:D,isRecovery:b}}}},function(e){e.O(0,[4358,139,6900,537,6452,7138,1119,381,7185,3730,2971,7023,1744],function(){return e(e.s=77679)}),_N_E=e.O()}]);