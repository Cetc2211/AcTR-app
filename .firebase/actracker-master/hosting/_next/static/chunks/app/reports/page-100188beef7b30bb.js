(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[882],{79439:function(e,s,t){Promise.resolve().then(t.bind(t,21450))},21450:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return v}});var r=t(57437),a=t(48185),l=t(89733),n=t(38087),i=t(11541),d=t(98604),c=t(14035),o=t(57010),u=t(22180),f=t(20530),x=t(18422),m=t(2265),p=t(87138),h=t(2128),j=t(70402),g=t(67568),N=t(86763);function v(){let{activeGroup:e,calculateFinalGrade:s,groupAverages:t,partialData:v,activePartialId:b,isLoading:y}=(0,g.e)(),{participations:w,activities:Z,activityRecords:S,grades:_,attendance:R}=v,[A,T]=(0,m.useState)(null),{toast:C}=(0,N.pm)(),E=(0,m.useMemo)(()=>{if(!e||y||!e.criteria||0===e.criteria.length)return null;let r=e.students.length,a=0,l=0;e.students.forEach(e=>{Object.keys(R).forEach(s=>{var t;(null===(t=R[s])||void 0===t?void 0:t[e.id])!==void 0&&(l++,R[s][e.id]&&a++)})});let n=l>0?a/l*100:100,i=0;return e.students.forEach(e=>{s(e.id)>=60&&i++}),{studentCount:r,groupAverage:parseFloat((t[e.id]||0).toFixed(1)),attendanceRate:parseFloat(n.toFixed(1)),approvedCount:i,totalAttendanceRecords:a,criteriaCount:e.criteria.length}},[e,s,t,y,R]);return y?(0,r.jsx)("div",{className:"flex justify-center items-center h-full",children:(0,r.jsx)(n.Z,{className:"h-8 w-8 animate-spin"})}):e?e.criteria&&0!==e.criteria.length?(0,r.jsxs)("div",{className:"flex flex-col gap-8",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold",children:"Reportes e Informes"}),(0,r.jsx)("p",{className:"text-muted-foreground",children:"Genera reportes acad\xe9micos personalizados para tu grupo activo."})]}),(0,r.jsx)(a.Zb,{className:"bg-muted/30",children:(0,r.jsx)(a.Ol,{children:(0,r.jsxs)("div",{className:"flex justify-between items-start",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{className:"text-sm font-semibold text-primary flex items-center gap-2",children:[(0,r.jsx)(c.Z,{})," Grupo Activo"]}),(0,r.jsx)(a.ll,{className:"text-2xl mt-1",children:e.subject}),(0,r.jsxs)(a.SZ,{children:[null==E?void 0:E.studentCount," estudiantes • ",null==E?void 0:E.criteriaCount," criterios de evaluaci\xf3n (",b,")"]})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Total de asistencias del grupo:"}),(0,r.jsx)("p",{className:"text-3xl font-bold text-primary",children:null==E?void 0:E.totalAttendanceRecords})]})]})})}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-6",children:[(0,r.jsxs)(a.Zb,{children:[(0,r.jsxs)(a.Ol,{children:[(0,r.jsxs)(a.ll,{className:"flex items-center gap-2",children:[(0,r.jsx)(i.Z,{})," Reporte General del Grupo"]}),(0,r.jsx)(a.SZ,{children:"Reporte integral con calificaciones, asistencia y estad\xedsticas del grupo para el parcial activo."})]}),(0,r.jsx)(a.eW,{children:(0,r.jsx)(l.z,{className:"w-full",asChild:!0,children:(0,r.jsxs)(p.default,{href:"/reports/".concat(e.id,"/").concat(b),children:[(0,r.jsx)(o.Z,{className:"mr-2 h-4 w-4"})," Vista Previa y Descarga"]})})})]}),(0,r.jsxs)(a.Zb,{children:[(0,r.jsxs)(a.Ol,{children:[(0,r.jsxs)(a.ll,{className:"flex items-center gap-2",children:[(0,r.jsx)(d.Z,{className:"text-destructive"})," Reporte de Riesgo"]}),(0,r.jsx)(a.SZ,{children:"An\xe1lisis detallado de estudiantes en riesgo a lo largo del semestre."})]}),(0,r.jsx)(a.eW,{children:(0,r.jsx)(l.z,{className:"w-full",variant:"destructive",asChild:!0,children:(0,r.jsxs)(p.default,{href:"/reports/".concat(e.id,"/at-risk"),children:[(0,r.jsx)(o.Z,{className:"mr-2 h-4 w-4"})," Ver Informe de Riesgo"]})})})]}),(0,r.jsxs)(a.Zb,{className:"md:col-span-2",children:[(0,r.jsxs)(a.Ol,{children:[(0,r.jsxs)(a.ll,{className:"flex items-center gap-2",children:[(0,r.jsx)(u.Z,{})," Informe General Semestral"]}),(0,r.jsx)(a.SZ,{children:"An\xe1lisis consolidado del semestre con recomendaciones y \xe1reas de oportunidad."})]}),(0,r.jsx)(a.eW,{children:(0,r.jsx)(l.z,{className:"w-full",asChild:!0,children:(0,r.jsxs)(p.default,{href:"/semester-evaluation",children:[(0,r.jsx)(o.Z,{className:"mr-2 h-4 w-4"})," Generar Informe Semestral"]})})})]}),(0,r.jsxs)(a.Zb,{className:"md:col-span-2",children:[(0,r.jsxs)(a.Ol,{children:[(0,r.jsxs)(a.ll,{className:"flex items-center gap-2",children:[(0,r.jsx)(f.Z,{})," Informe Individual por Estudiante"]}),(0,r.jsx)(a.SZ,{children:"Genera un informe detallado para un estudiante espec\xedfico del grupo activo."})]}),(0,r.jsx)(a.aY,{children:(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(j._,{htmlFor:"student-select",children:"Selecciona un Estudiante"}),(0,r.jsxs)(h.Ph,{onValueChange:T,value:A||"",children:[(0,r.jsx)(h.i4,{id:"student-select",children:(0,r.jsx)(h.ki,{placeholder:"Elige un estudiante..."})}),(0,r.jsx)(h.Bw,{children:e.students.map(e=>(0,r.jsx)(h.Ql,{value:e.id,children:e.name},e.id))})]})]})}),(0,r.jsx)(a.eW,{children:(0,r.jsx)(l.z,{className:"w-full",asChild:!0,disabled:!A,children:(0,r.jsxs)(p.default,{href:"/students/".concat(A),children:[(0,r.jsx)(x.Z,{className:"mr-2 h-4 w-4"})," Generar Informe Individual"]})})})]})]}),(0,r.jsxs)(a.Zb,{children:[(0,r.jsx)(a.Ol,{children:(0,r.jsx)(a.ll,{children:"Estad\xedsticas R\xe1pidas"})}),(0,r.jsxs)(a.aY,{className:"grid grid-cols-2 md:grid-cols-4 gap-6 text-center",children:[(0,r.jsxs)("div",{className:"flex flex-col items-center gap-1",children:[(0,r.jsx)("p",{className:"text-3xl font-bold text-green-600",children:null==E?void 0:E.studentCount}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Estudiantes"})]}),(0,r.jsxs)("div",{className:"flex flex-col items-center gap-1",children:[(0,r.jsx)("p",{className:"text-3xl font-bold text-blue-600",children:null==E?void 0:E.groupAverage}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Promedio del Grupo"})]}),(0,r.jsxs)("div",{className:"flex flex-col items-center gap-1",children:[(0,r.jsxs)("p",{className:"text-3xl font-bold text-yellow-500",children:[null==E?void 0:E.attendanceRate,"%"]}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Asistencia"})]}),(0,r.jsxs)("div",{className:"flex flex-col items-center gap-1",children:[(0,r.jsx)("p",{className:"text-3xl font-bold text-purple-600",children:null==E?void 0:E.approvedCount}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Aprobados (≥60)"})]})]})]})]}):(0,r.jsx)("div",{className:"flex flex-col gap-6",children:(0,r.jsx)(a.Zb,{className:"md:col-span-2 lg:col-span-3",children:(0,r.jsxs)(a.aY,{className:"flex flex-col items-center justify-center text-center p-12 gap-4",children:[(0,r.jsx)("div",{className:"bg-muted rounded-full p-4",children:(0,r.jsx)(d.Z,{className:"h-12 w-12 text-muted-foreground"})}),(0,r.jsx)(a.ll,{children:"Faltan Criterios de Evaluaci\xf3n"}),(0,r.jsxs)(a.SZ,{children:["Para generar informes y estad\xedsticas, primero debes ",(0,r.jsx)(p.default,{href:"/grades/".concat(e.id,"/criteria"),className:"text-primary underline",children:"definir los criterios de evaluaci\xf3n"})," para este grupo."]})]})})}):(0,r.jsx)("div",{className:"flex flex-col gap-6",children:(0,r.jsx)(a.Zb,{className:"md:col-span-2 lg:col-span-3",children:(0,r.jsxs)(a.aY,{className:"flex flex-col items-center justify-center text-center p-12 gap-4",children:[(0,r.jsx)("div",{className:"bg-muted rounded-full p-4",children:(0,r.jsx)(i.Z,{className:"h-12 w-12 text-muted-foreground"})}),(0,r.jsx)(a.ll,{children:"No hay un grupo activo"}),(0,r.jsxs)(a.SZ,{children:["Para ver esta secci\xf3n, por favor ",(0,r.jsx)(p.default,{href:"/groups",className:"text-primary underline",children:"selecciona un grupo"})," primero."]})]})})})}},89733:function(e,s,t){"use strict";t.d(s,{d:function(){return d},z:function(){return c}});var r=t(57437),a=t(2265),l=t(71538),n=t(13027),i=t(49354);let d=(0,n.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=a.forwardRef((e,s)=>{let{className:t,variant:a,size:n,asChild:c=!1,...o}=e,u=c?l.g7:"button";return(0,r.jsx)(u,{className:(0,i.cn)(d({variant:a,size:n,className:t})),ref:s,...o})});c.displayName="Button"},48185:function(e,s,t){"use strict";t.d(s,{Ol:function(){return i},SZ:function(){return c},Zb:function(){return n},aY:function(){return o},eW:function(){return u},ll:function(){return d}});var r=t(57437),a=t(2265),l=t(49354);let n=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,l.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...a})});n.displayName="Card";let i=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",t),...a})});i.displayName="CardHeader";let d=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",t),...a})});d.displayName="CardTitle";let c=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,l.cn)("text-sm text-muted-foreground",t),...a})});c.displayName="CardDescription";let o=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,l.cn)("p-6 pt-0",t),...a})});o.displayName="CardContent";let u=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,l.cn)("flex items-center p-6 pt-0",t),...a})});u.displayName="CardFooter"},70402:function(e,s,t){"use strict";t.d(s,{_:function(){return c}});var r=t(57437),a=t(2265),l=t(38364),n=t(13027),i=t(49354);let d=(0,n.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)(l.f,{ref:s,className:(0,i.cn)(d(),t),...a})});c.displayName=l.f.displayName},2128:function(e,s,t){"use strict";t.d(s,{Bw:function(){return p},Ph:function(){return o},Ql:function(){return h},i4:function(){return f},ki:function(){return u}});var r=t(57437),a=t(2265),l=t(17549),n=t(90186),i=t(56741),d=t(60926),c=t(49354);let o=l.fC;l.ZA;let u=l.B4,f=a.forwardRef((e,s)=>{let{className:t,children:a,...i}=e;return(0,r.jsxs)(l.xz,{ref:s,className:(0,c.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...i,children:[a,(0,r.jsx)(l.JO,{asChild:!0,children:(0,r.jsx)(n.Z,{className:"h-4 w-4 opacity-50"})})]})});f.displayName=l.xz.displayName;let x=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)(l.u_,{ref:s,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",t),...a,children:(0,r.jsx)(i.Z,{className:"h-4 w-4"})})});x.displayName=l.u_.displayName;let m=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)(l.$G,{ref:s,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",t),...a,children:(0,r.jsx)(n.Z,{className:"h-4 w-4"})})});m.displayName=l.$G.displayName;let p=a.forwardRef((e,s)=>{let{className:t,children:a,position:n="popper",...i}=e;return(0,r.jsx)(l.h_,{children:(0,r.jsxs)(l.VY,{ref:s,className:(0,c.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...i,children:[(0,r.jsx)(x,{}),(0,r.jsx)(l.l_,{className:(0,c.cn)("p-1","popper"===n&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:a}),(0,r.jsx)(m,{})]})})});p.displayName=l.VY.displayName,a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)(l.__,{ref:s,className:(0,c.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...a})}).displayName=l.__.displayName;let h=a.forwardRef((e,s)=>{let{className:t,children:a,...n}=e;return(0,r.jsxs)(l.ck,{ref:s,className:(0,c.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(l.wU,{children:(0,r.jsx)(d.Z,{className:"h-4 w-4"})})}),(0,r.jsx)(l.eT,{children:a})]})});h.displayName=l.ck.displayName,a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)(l.Z0,{ref:s,className:(0,c.cn)("-mx-1 my-1 h-px bg-muted",t),...a})}).displayName=l.Z0.displayName},86763:function(e,s,t){"use strict";t.d(s,{pm:function(){return f}});var r=t(2265);let a=0,l=new Map,n=e=>{if(l.has(e))return;let s=setTimeout(()=>{l.delete(e),o({type:"REMOVE_TOAST",toastId:e})},1e6);l.set(e,s)},i=(e,s)=>{switch(s.type){case"ADD_TOAST":return{...e,toasts:[s.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===s.toast.id?{...e,...s.toast}:e)};case"DISMISS_TOAST":{let{toastId:t}=s;return t?n(t):e.toasts.forEach(e=>{n(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===t||void 0===t?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===s.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==s.toastId)}}},d=[],c={toasts:[]};function o(e){c=i(c,e),d.forEach(e=>{e(c)})}function u(e){let{...s}=e,t=(a=(a+1)%Number.MAX_SAFE_INTEGER).toString(),r=()=>o({type:"DISMISS_TOAST",toastId:t});return o({type:"ADD_TOAST",toast:{...s,id:t,open:!0,onOpenChange:e=>{e||r()}}}),{id:t,dismiss:r,update:e=>o({type:"UPDATE_TOAST",toast:{...e,id:t}})}}function f(){let[e,s]=r.useState(c);return r.useEffect(()=>(d.push(s),()=>{let e=d.indexOf(s);e>-1&&d.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>o({type:"DISMISS_TOAST",toastId:e})}}}},function(e){e.O(0,[4358,139,6900,6902,7138,3956,381,4387,6976,1830,3730,2971,7023,1744],function(){return e(e.s=79439)}),_N_E=e.O()}]);