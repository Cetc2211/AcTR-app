(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4992],{2463:function(e,t,r){Promise.resolve().then(r.bind(r,14682))},14682:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return x}});var a=r(57437),s=r(48185),n=r(47304),l=r(67568),i=r(2265),c=r(66648),d=r(87138),o=r(38087),u=r(64443),f=r(79055),m=r(49354);function x(){let{activeGroup:e,calculateDetailedFinalGrade:t,isLoading:r,fetchPartialData:x}=(0,l.e)(),[p,h]=(0,i.useState)([]),[j,b]=(0,i.useState)(!0),[g,N]=(0,i.useState)([]);if((0,i.useEffect)(()=>{let a=async()=>{if(!e){b(!1);return}b(!0);let r=["p1","p2","p3"],a=[],s=await Promise.all(r.map(t=>x(e.id,t)));s.forEach((e,t)=>{e&&(Object.keys(e.grades).length>0||Object.keys(e.recoveryGrades||{}).length>0)&&a.push(r[t])}),N(a);let n=e.students.map(async a=>{let n={},l=0,i=0;r.forEach((r,c)=>{let d=s[c],o=e.criteria||[];if(d&&(o.length>0||Object.keys(d.recoveryGrades||{}).length>0)){let{finalGrade:e,isRecovery:s}=t(a.id,d,o);n[r]={grade:e,isRecovery:s},l+=e,i++}});let c=3===i?l/3:void 0;return{student:a,p1:n.p1,p2:n.p2,p3:n.p3,average:c}});h((await Promise.all(n)).sort((e,t)=>e.student.name.localeCompare(t.student.name))),b(!1)};r||a()},[e,t,x,r]),r)return(0,a.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,a.jsx)(o.Z,{className:"h-8 w-8 animate-spin"})});if(j)return(0,a.jsxs)("div",{className:"flex items-center justify-center h-full",children:[(0,a.jsx)(o.Z,{className:"h-8 w-8 animate-spin"})," ",(0,a.jsx)("span",{className:"ml-2",children:"Calculando calificaciones semestrales..."})]});if(!e)return(0,a.jsx)(s.Zb,{children:(0,a.jsxs)(s.Ol,{className:"text-center",children:[(0,a.jsx)(u.Z,{className:"mx-auto h-12 w-12 text-muted-foreground"}),(0,a.jsx)(s.ll,{children:"Evaluaci\xf3n Semestral"}),(0,a.jsxs)(s.SZ,{children:["Para ver esta secci\xf3n, por favor ",(0,a.jsx)(d.default,{href:"/groups",className:"text-primary underline",children:"selecciona un grupo"})," primero."]})]})});if(!e.criteria||0===e.criteria.length)return(0,a.jsx)(s.Zb,{children:(0,a.jsxs)(s.Ol,{className:"text-center",children:[(0,a.jsx)(u.Z,{className:"mx-auto h-12 w-12 text-muted-foreground"}),(0,a.jsx)(s.ll,{children:"Faltan Criterios de Evaluaci\xf3n"}),(0,a.jsxs)(s.SZ,{children:["Para calcular la evaluaci\xf3n semestral, primero debes ",(0,a.jsx)(d.default,{href:"/grades/".concat(e.id,"/criteria"),className:"text-primary underline",children:"definir los criterios de evaluaci\xf3n"}),' para el grupo "',e.subject,'".']})]})});let v=e=>{let{data:t}=e;return void 0===t?(0,a.jsx)("span",{className:"text-muted-foreground",children:"N/A"}):(0,a.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,a.jsxs)("span",{children:[t.grade.toFixed(1),"%"]}),t.isRecovery&&(0,a.jsx)("span",{className:"text-red-500 font-bold",children:"R"})]})};return(0,a.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold",children:"Evaluaci\xf3n Semestral"}),(0,a.jsxs)("p",{className:"text-muted-foreground",children:["Resumen de calificaciones de los parciales y promedio final para el grupo: ",e.subject]})]}),(0,a.jsx)(s.Zb,{children:(0,a.jsx)(s.aY,{className:"p-0",children:(0,a.jsxs)(n.iA,{children:[(0,a.jsx)(n.xD,{children:(0,a.jsxs)(n.SC,{children:[(0,a.jsx)(n.ss,{className:"w-[300px]",children:"Estudiante"}),g.includes("p1")&&(0,a.jsx)(n.ss,{className:"text-center bg-partial-1-bg text-partial-1-foreground-alt",children:"Primer Parcial"}),g.includes("p2")&&(0,a.jsx)(n.ss,{className:"text-center bg-partial-2-bg text-partial-2-foreground-alt",children:"Segundo Parcial"}),g.includes("p3")&&(0,a.jsx)(n.ss,{className:"text-center bg-partial-3-bg text-partial-3-foreground-alt",children:"Tercer Parcial"}),(0,a.jsx)(n.ss,{className:"text-center font-bold",children:"Promedio Semestral"})]})}),(0,a.jsxs)(n.RM,{children:[p.map(e=>{let{student:t,p1:r,p2:s,p3:l,average:i}=e;return(0,a.jsxs)(n.SC,{children:[(0,a.jsxs)(n.pj,{className:"font-medium flex items-center gap-3",children:[(0,a.jsx)(c.default,{src:t.photo,alt:t.name,width:40,height:40,className:"rounded-full"}),t.name]}),g.includes("p1")&&(0,a.jsx)(n.pj,{className:"text-center font-semibold",children:(0,a.jsx)(v,{data:r})}),g.includes("p2")&&(0,a.jsx)(n.pj,{className:"text-center font-semibold",children:(0,a.jsx)(v,{data:s})}),g.includes("p3")&&(0,a.jsx)(n.pj,{className:"text-center font-semibold",children:(0,a.jsx)(v,{data:l})}),(0,a.jsx)(n.pj,{className:"text-center",children:void 0!==i?(0,a.jsxs)(f.C,{className:(0,m.cn)("text-base",i>=60?"bg-primary":"bg-destructive"),children:[i.toFixed(1),"%"]}):(0,a.jsx)(f.C,{variant:"outline",children:"Pendiente"})})]},t.id)}),0===e.students.length&&(0,a.jsx)(n.SC,{children:(0,a.jsx)(n.pj,{colSpan:5,className:"text-center h-24",children:"Este grupo no tiene estudiantes."})})]})]})})})]})}},79055:function(e,t,r){"use strict";r.d(t,{C:function(){return i}});var a=r(57437);r(2265);var s=r(13027),n=r(49354);let l=(0,s.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function i(e){let{className:t,variant:r,...s}=e;return(0,a.jsx)("div",{className:(0,n.cn)(l({variant:r}),t),...s})}},48185:function(e,t,r){"use strict";r.d(t,{Ol:function(){return i},SZ:function(){return d},Zb:function(){return l},aY:function(){return o},eW:function(){return u},ll:function(){return c}});var a=r(57437),s=r(2265),n=r(49354);let l=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...s})});l.displayName="Card";let i=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",r),...s})});i.displayName="CardHeader";let c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",r),...s})});c.displayName="CardTitle";let d=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",r),...s})});d.displayName="CardDescription";let o=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",r),...s})});o.displayName="CardContent";let u=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",r),...s})});u.displayName="CardFooter"},47304:function(e,t,r){"use strict";r.d(t,{RM:function(){return c},SC:function(){return d},iA:function(){return l},pj:function(){return u},ss:function(){return o},xD:function(){return i}});var a=r(57437),s=r(2265),n=r(49354);let l=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{className:"relative w-full overflow-auto",children:(0,a.jsx)("table",{ref:t,className:(0,n.cn)("w-full caption-bottom text-sm",r),...s})})});l.displayName="Table";let i=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("thead",{ref:t,className:(0,n.cn)("[&_tr]:border-b",r),...s})});i.displayName="TableHeader";let c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("tbody",{ref:t,className:(0,n.cn)("[&_tr:last-child]:border-0",r),...s})});c.displayName="TableBody",s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("tfoot",{ref:t,className:(0,n.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",r),...s})}).displayName="TableFooter";let d=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("tr",{ref:t,className:(0,n.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",r),...s})});d.displayName="TableRow";let o=s.forwardRef((e,t)=>{let{className:r,padding:s="default",...l}=e;return(0,a.jsx)("th",{ref:t,className:(0,n.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground","checkbox"===s?"p-2 w-4":"",r),...l})});o.displayName="TableHead";let u=s.forwardRef((e,t)=>{let{className:r,padding:s="default",...l}=e;return(0,a.jsx)("td",{ref:t,className:(0,n.cn)("p-4 align-middle","checkbox"===s?"p-2":"",r),...l})});u.displayName="TableCell",s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("caption",{ref:t,className:(0,n.cn)("mt-4 text-sm text-muted-foreground",r),...s})}).displayName="TableCaption"},38087:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(6497).Z)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},64443:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(6497).Z)("Presentation",[["path",{d:"M2 3h20",key:"91anmk"}],["path",{d:"M21 3v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V3",key:"2k9sn8"}],["path",{d:"m7 21 5-5 5 5",key:"bip4we"}]])}},function(e){e.O(0,[4358,139,6900,537,6452,7138,3928,3730,2971,7023,1744],function(){return e(e.s=2463)}),_N_E=e.O()}]);