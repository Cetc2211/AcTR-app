(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7279],{34444:function(e,t,r){Promise.resolve().then(r.bind(r,30537))},30537:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return g}});var s=r(57437),a=r(2265),n=r(48185),i=r(47304),o=r(89733),c=r(44541),l=r(66648),d=r(6460),u=r(80624),f=r(81608),m=r(87138),p=r(86644),x=r(86763),h=r(67568);function g(){let{activeGroup:e,partialData:t,setParticipations:r,takeAttendanceForDate:g}=(0,h.e)(),{participations:b,attendance:v}=t,{toast:j}=(0,x.pm)(),N=(0,a.useMemo)(()=>e?[...e.students].sort((e,t)=>e.name.localeCompare(t.name)):[],[e]),y=(0,a.useMemo)(()=>v?Object.keys(v).sort((e,t)=>new Date(t).getTime()-new Date(e).getTime()):[],[v]),w=async()=>{if(!e)return;let t=(0,d.WU)(new Date,"yyyy-MM-dd");await g(e.id,t),j({title:"Listo para registrar",description:"Se ha habilitado el registro de participaciones para hoy."})},T=(t,s,a)=>{if(e){if(a){var n;if((null===(n=v[s])||void 0===n?void 0:n[t])!==!0){j({variant:"destructive",title:"Incongruencia en el registro",description:"El estudiante no tiene asistencia registrada para este d\xeda."});return}}r(e=>{let r={...e};return r[s]||(r[s]={}),r[s][t]=a,r})}};return(0,s.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)(o.z,{asChild:!0,variant:"outline",size:"icon",children:(0,s.jsxs)(m.default,{href:e?"/groups/".concat(e.id):"/groups",children:[(0,s.jsx)(p.Z,{}),(0,s.jsx)("span",{className:"sr-only",children:"Regresar"})]})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold",children:"Registro de Participaciones"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:e?"Grupo: ".concat(e.subject):"Selecciona un grupo para registrar participaciones."})]})]}),(0,s.jsx)("div",{className:"flex items-center gap-2",children:e&&(0,s.jsx)(o.z,{onClick:w,children:"Registrar Participaciones de Hoy"})})]}),(0,s.jsx)(n.Zb,{children:(0,s.jsx)(n.aY,{className:"p-0",children:(0,s.jsx)("div",{className:"relative w-full overflow-auto",children:(0,s.jsxs)(i.iA,{children:[(0,s.jsx)(i.xD,{children:(0,s.jsxs)(i.SC,{children:[(0,s.jsx)(i.ss,{className:"w-[300px] sticky left-0 bg-card z-10",children:"Estudiante"}),y.map(e=>(0,s.jsx)(i.ss,{className:"text-center",children:(0,d.WU)((0,u.D)(e),"dd MMM",{locale:f.es})},e))]})}),(0,s.jsxs)(i.RM,{children:[N.map(e=>(0,s.jsxs)(i.SC,{children:[(0,s.jsxs)(i.pj,{className:"font-medium sticky left-0 bg-card z-10 flex items-center gap-3",children:[(0,s.jsx)(l.default,{src:e.photo,alt:e.name,width:40,height:40,className:"rounded-full"}),e.name]}),y.map(t=>{var r;return(0,s.jsx)(i.pj,{className:"text-center",children:(0,s.jsx)(c.X,{checked:(null===(r=b[t])||void 0===r?void 0:r[e.id])||!1,onCheckedChange:r=>T(e.id,t,!!r)})},"".concat(e.id,"-").concat(t))})]},e.id)),0===N.length&&(0,s.jsx)(i.SC,{children:(0,s.jsx)(i.pj,{colSpan:y.length+1,className:"text-center h-24",children:e?"Este grupo no tiene estudiantes.":'No hay un grupo activo. Por favor, selecciona uno en la secci\xf3n de "Grupos".'})}),0===y.length&&N.length>0&&(0,s.jsx)(i.SC,{children:(0,s.jsx)(i.pj,{colSpan:1,className:"text-center h-24",children:'Ve a la p\xe1gina de Asistencia para registrar nuevas fechas o haz clic en "Registrar Participaciones de Hoy" para empezar.'})})]})]})})})})]})}},89733:function(e,t,r){"use strict";r.d(t,{d:function(){return c},z:function(){return l}});var s=r(57437),a=r(2265),n=r(71538),i=r(13027),o=r(49354);let c=(0,i.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),l=a.forwardRef((e,t)=>{let{className:r,variant:a,size:i,asChild:l=!1,...d}=e,u=l?n.g7:"button";return(0,s.jsx)(u,{className:(0,o.cn)(c({variant:a,size:i,className:r})),ref:t,...d})});l.displayName="Button"},48185:function(e,t,r){"use strict";r.d(t,{Ol:function(){return o},SZ:function(){return l},Zb:function(){return i},aY:function(){return d},eW:function(){return u},ll:function(){return c}});var s=r(57437),a=r(2265),n=r(49354);let i=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...a})});i.displayName="Card";let o=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",r),...a})});o.displayName="CardHeader";let c=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",r),...a})});c.displayName="CardTitle";let l=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",r),...a})});l.displayName="CardDescription";let d=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",r),...a})});d.displayName="CardContent";let u=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",r),...a})});u.displayName="CardFooter"},44541:function(e,t,r){"use strict";r.d(t,{X:function(){return c}});var s=r(57437),a=r(2265),n=r(69324),i=r(60926),o=r(49354);let c=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(n.fC,{ref:t,className:(0,o.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",r),...a,children:(0,s.jsx)(n.z$,{className:(0,o.cn)("flex items-center justify-center text-current"),children:(0,s.jsx)(i.Z,{className:"h-4 w-4"})})})});c.displayName=n.fC.displayName},47304:function(e,t,r){"use strict";r.d(t,{RM:function(){return c},SC:function(){return l},iA:function(){return i},pj:function(){return u},ss:function(){return d},xD:function(){return o}});var s=r(57437),a=r(2265),n=r(49354);let i=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{className:"relative w-full overflow-auto",children:(0,s.jsx)("table",{ref:t,className:(0,n.cn)("w-full caption-bottom text-sm",r),...a})})});i.displayName="Table";let o=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("thead",{ref:t,className:(0,n.cn)("[&_tr]:border-b",r),...a})});o.displayName="TableHeader";let c=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("tbody",{ref:t,className:(0,n.cn)("[&_tr:last-child]:border-0",r),...a})});c.displayName="TableBody",a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("tfoot",{ref:t,className:(0,n.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",r),...a})}).displayName="TableFooter";let l=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("tr",{ref:t,className:(0,n.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",r),...a})});l.displayName="TableRow";let d=a.forwardRef((e,t)=>{let{className:r,padding:a="default",...i}=e;return(0,s.jsx)("th",{ref:t,className:(0,n.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground","checkbox"===a?"p-2 w-4":"",r),...i})});d.displayName="TableHead";let u=a.forwardRef((e,t)=>{let{className:r,padding:a="default",...i}=e;return(0,s.jsx)("td",{ref:t,className:(0,n.cn)("p-4 align-middle","checkbox"===a?"p-2":"",r),...i})});u.displayName="TableCell",a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("caption",{ref:t,className:(0,n.cn)("mt-4 text-sm text-muted-foreground",r),...a})}).displayName="TableCaption"},86763:function(e,t,r){"use strict";r.d(t,{pm:function(){return f}});var s=r(2265);let a=0,n=new Map,i=e=>{if(n.has(e))return;let t=setTimeout(()=>{n.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);n.set(e,t)},o=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:r}=t;return r?i(r):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},c=[],l={toasts:[]};function d(e){l=o(l,e),c.forEach(e=>{e(l)})}function u(e){let{...t}=e,r=(a=(a+1)%Number.MAX_SAFE_INTEGER).toString(),s=()=>d({type:"DISMISS_TOAST",toastId:r});return d({type:"ADD_TOAST",toast:{...t,id:r,open:!0,onOpenChange:e=>{e||s()}}}),{id:r,dismiss:s,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:r}})}}function f(){let[e,t]=s.useState(l);return s.useEffect(()=>(c.push(t),()=>{let e=c.indexOf(t);e>-1&&c.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}}},function(e){e.O(0,[4358,139,6900,6902,7138,3928,1119,8477,4641,3730,2971,7023,1744],function(){return e(e.s=34444)}),_N_E=e.O()}]);